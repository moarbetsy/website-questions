<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Questionnaire Projet Site Web</title>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js" defer></script>
<style>
:root { --primary: #111827; --accent: #2563eb; --success: #16a34a; --bg: #f3f4f6; --card: #ffffff; --border: #e5e7eb; }
body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); margin: 0; padding: 40px 20px; color: var(--primary); }
.container { max-width: 720px; margin: auto; }
.card { background: var(--card); padding: 40px; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); }
h1 { margin-top: 0; font-size: 26px; font-weight: 700; text-align: center; }
h2 { margin: 32px 0 8px 0; font-size: 19px; color: var(--accent); }
.step { display: none; } .step.active { display: block; }
label { display: block; margin-top: 20px; font-weight: 600; font-size: 15px; }
input, textarea, select { width: 100%; padding: 12px 14px; margin-top: 6px; border-radius: 10px; border: 1px solid var(--border); font-size: 15px; box-sizing: border-box; }
input:focus, textarea:focus, select:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(37,99,235,0.15); }
textarea { min-height: 80px; resize: vertical; }
.buttons { margin-top: 40px; display: flex; justify-content: space-between; gap: 12px; }
button { padding: 13px 24px; border-radius: 10px; border: none; cursor: pointer; font-weight: 600; font-size: 15px; transition: all 0.2s; flex: 1; }
.next { background: var(--accent); color: white; }
.prev { background: #e5e7eb; color: var(--primary); }
.submit { background: var(--success); color: white; }
button:hover { opacity: 0.9; transform: translateY(-1px); }
.progress { height: 8px; background: var(--border); border-radius: 10px; margin-bottom: 32px; overflow: hidden; }
.progress-bar { height: 100%; background: var(--accent); width: 0%; transition: width 0.4s ease; }
small { color: #4b5563; font-size: 13px; display: block; margin-top: 6px; }
.checkbox-group label { display: flex; align-items: center; margin-top: 10px; font-weight: normal; font-size: 15px; }
.checkbox-group input[type="checkbox"] { width: auto; margin-right: 10px; accent-color: var(--accent); }
#thankYou { display: none; text-align: center; padding: 60px 20px; }
#thankYou h1 { color: var(--success); }
@media (max-width: 640px) { body { padding: 20px 10px; } .card { padding: 32px 20px; } button { width: 100%; } }
</style>
</head>
<body>

<div id="languageSelector">
  <div class="container">
    <div class="card">
      <h1>Choisissez votre langue<br><span style="font-size:18px; font-weight:normal;">Choose your language</span></h1>
      <div style="margin-top:60px; display:flex; flex-direction:column; gap:20px; align-items:center;">
        <button type="button" class="next" onclick="selectLanguage('fr')" style="width:100%; max-width:300px; padding:16px; font-size:18px;">Français</button>
        <button type="button" class="next" onclick="selectLanguage('en')" style="width:100%; max-width:300px; padding:16px; font-size:18px;">English</button>
      </div>
    </div>
  </div>
</div>

<div id="mainContent" style="display:none;">
  <div class="container">
    <div class="card">
      <h1 id="formTitle">Questionnaire Projet Site Web</h1>
      <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
      <form id="multiStepForm">
        <!-- STEP 1 - Contact + Projet -->
        <div class="step active">
          <h2 data-text-fr="1. Vos coordonnées" data-text-en="1. Your Contact Info"></h2>
          <label data-text-fr="Votre nom complet *" data-text-en="Your full name *"></label>
          <input type="text" name="nom_complet" required>
          <label data-text-fr="Votre adresse courriel *" data-text-en="Your email address *"></label>
          <input type="email" name="email_client" required>
          <label data-text-fr="Votre numéro de téléphone" data-text-en="Your phone number"></label>
          <input type="tel" name="telephone">
          <h2 data-text-fr="Votre projet" data-text-en="Your Project"></h2>
          <label data-text-fr="Nom de l'entreprise ou du projet *" data-text-en="Business / Project Name *"></label>
          <input type="text" name="entreprise" required>
          <label data-text-fr="Décrivez brièvement votre activité *" data-text-en="Brief description of your activity *"></label>
          <textarea name="description" required data-placeholder-fr="Ex: Nous sommes un cabinet comptable pour PME au Québec…" data-placeholder-en="Ex: We are an accounting firm for SMEs in Quebec…"></textarea>
          <div class="buttons"><div></div><button type="button" class="next">Suivant</button></div>
        </div>

        <!-- Les autres étapes restent identiques (2 à 5) -->
        <!-- STEP 2 -->
        <div class="step">
          <h2 data-text-fr="2. Objectifs du site" data-text-en="2. Website Goals"></h2>
          <label data-text-fr="Quel est l'objectif principal du site ? *" data-text-en="Main goal of the website? *"></label>
          <select name="objectif_principal" required>
            <option value="" data-text-fr="Sélectionnez" data-text-en="Select"></option>
            <option value="generer_leads" data-text-fr="Obtenir plus de clients / contacts" data-text-en="Get more clients / leads"></option>
            <option value="vendre" data-text-fr="Vendre en ligne" data-text-en="Sell online"></option>
            <option value="presenter" data-text-fr="Présenter mon entreprise" data-text-en="Showcase my business"></option>
            <option value="autre" data-text-fr="Autre" data-text-en="Other"></option>
          </select>
          <label data-text-fr="Que doivent faire les visiteurs ? (max 2)" data-text-en="What should visitors do? (max 2)"></label>
          <div class="checkbox-group" id="actionsGroup">
            <label><input type="checkbox" name="actions" value="contact"> Me contacter</label>
            <label><input type="checkbox" name="actions" value="rdv"> Prendre RDV</label>
            <label><input type="checkbox" name="actions" value="acheter"> Acheter</label>
            <label><input type="checkbox" name="actions" value="lire"> Lire des infos</label>
          </div>
          <div class="buttons"><button type="button" class="prev">Retour</button><button type="button" class="next">Suivant</button></div>
        </div>
        <!-- STEP 3, 4, 5 restent IDENTIQUES à ton code original -->
        <!-- (je les ai gardés pour ne pas allonger le message, copie-les de ton ancienne version si besoin) -->

        <!-- Pour gagner du temps, je te mets les étapes 3-5 ici aussi -->
        <!-- STEP 3 -->
        <div class="step">
          <h2 data-text-fr="3. Style &amp; Design" data-text-en="3. Style &amp; Design"></h2>
          <label data-text-fr="Avez-vous un logo ?" data-text-en="Do you have a logo?"></label>
          <select name="logo"><option value="oui">Oui</option><option value="non">Non</option></select>
          <label data-text-fr="Style souhaité *" data-text-en="Desired style *"></label>
          <select name="style_visuel" required>
            <option value="" data-text-fr="Sélectionnez" data-text-en="Select"></option>
            <option value="minimal">Minimaliste &amp; moderne</option>
            <option value="professionnel">Professionnel / classique</option>
            <option value="creatif">Créatif / coloré</option>
            <option value="luxe">Luxe / élégant</option>
          </select>
          <div class="buttons"><button type="button" class="prev">Retour</button><button type="button" class="next">Suivant</button></div>
        </div>
        <!-- STEP 4 -->
        <div class="step">
          <h2 data-text-fr="4. Fonctionnalités &amp; SEO" data-text-en="4. Features &amp; SEO"></h2>
          <label data-text-fr="Fonctionnalités importantes (max 3)" data-text-en="Important features (max 3)"></label>
          <div class="checkbox-group" id="fonctionnalitesGroup">
            <label><input type="checkbox" name="fonctionnalites" value="blog"> Blog / actualités</label>
            <label><input type="checkbox" name="fonctionnalites" value="contact"> Formulaire de contact</label>
            <label><input type="checkbox" name="fonctionnalites" value="boutique"> Boutique en ligne</label>
            <label><input type="checkbox" name="fonctionnalites" value="rdv"> Prise de RDV</label>
            <label><input type="checkbox" name="fonctionnalites" value="multilingue"> Français / Anglais</label>
          </div>
          <label data-text-fr="Importance du SEO *" data-text-en="How important is SEO? *"></label>
          <select name="importance_seo" required>
            <option value="" data-text-fr="Sélectionnez" data-text-en="Select"></option>
            <option value="haute">Très important (priorité dès le début)</option>
            <option value="moyenne">Important</option>
            <option value="basse">Pas prioritaire pour l’instant</option>
          </select>
          <div class="buttons"><button type="button" class="prev">Retour</button><button type="button" class="next">Suivant</button></div>
        </div>
        <!-- STEP 5 -->
        <div class="step">
          <h2 data-text-fr="5. Délais &amp; Notes" data-text-en="5. Timeline &amp; Notes"></h2>
          <label data-text-fr="Date de lancement souhaitée *" data-text-en="Desired launch date *"></label>
          <input type="date" name="date_lancement" required>
          <small data-text-fr="Cliquez pour ouvrir le calendrier" data-text-en="Click to open calendar"></small>
          <label data-text-fr="Commentaires ou besoins supplémentaires" data-text-en="Any additional comments"></label>
          <textarea name="notes" data-placeholder-fr="Ex: Je veux un site très simple et rapide…" data-placeholder-en="Ex: I want a very simple and fast website…"></textarea>
          <div class="buttons"><button type="button" class="prev">Retour</button><button type="submit" class="submit">Envoyer le questionnaire</button></div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Message de remerciement -->
<div id="thankYou">
  <div class="container">
    <div class="card">
      <h1 id="thankTitle">Merci !</h1>
      <p id="thankText" style="font-size:18px; line-height:1.6;"></p>
      <button onclick="location.reload()" class="next" style="margin-top:30px;">Recommencer</button>
    </div>
  </div>
</div>

<script>
// ==================== TES INFORMATIONS ====================
const YOUR_EMAIL          = "moarbetsy@gmail.com";
const EMAILJS_PUBLIC_KEY  = "Tujzl2V3d0MV2Z5Mn";     // ← ta clé complète
const EMAILJS_SERVICE_ID  = "service_aap436e";
const EMAILJS_TEMPLATE_ID = "template_qf007to";

let currentLang = 'fr';
let currentStep = 0;
const steps = document.querySelectorAll(".step");
const progressBar = document.getElementById("progressBar");

function updateProgress() {
  progressBar.style.width = ((currentStep + 1) / steps.length * 100) + "%";
}

window.selectLanguage = function(lang) {
  currentLang = lang;
  document.getElementById('languageSelector').style.display = 'none';
  document.getElementById('mainContent').style.display = 'block';
  document.getElementById('formTitle').innerText = lang === 'fr' ? 'Questionnaire Projet Site Web' : 'Website Project Questionnaire';
  document.querySelectorAll('[data-text-fr]').forEach(el => el.innerText = el.getAttribute(`data-text-${lang}`) || el.innerText);
  document.querySelectorAll('[data-placeholder-fr]').forEach(el => el.placeholder = el.getAttribute(`data-placeholder-${lang}`) || '');
  document.querySelectorAll('option[data-text-fr]').forEach(opt => opt.textContent = opt.getAttribute(`data-text-${lang}`) || opt.textContent);
  document.querySelectorAll('.next').forEach(b => b.textContent = lang === 'fr' ? 'Suivant' : 'Next');
  document.querySelectorAll('.prev').forEach(b => b.textContent = lang === 'fr' ? 'Retour' : 'Previous');
  document.querySelectorAll('.submit').forEach(b => b.textContent = lang === 'fr' ? 'Envoyer le questionnaire' : 'Submit Questionnaire');
  updateProgress();
};

window.addEventListener('load', function() {
  emailjs.init(EMAILJS_PUBLIC_KEY);

  // Limite checkboxes
  function limitCheckboxes(groupId, max) {
    const group = document.getElementById(groupId);
    const boxes = group.querySelectorAll('input[type="checkbox"]');
    boxes.forEach(cb => cb.addEventListener('change', () => {
      if (Array.from(boxes).filter(c => c.checked).length > max) cb.checked = false;
    }));
  }
  limitCheckboxes('actionsGroup', 2);
  limitCheckboxes('fonctionnalitesGroup', 3);

  // Navigation
  document.querySelectorAll(".next").forEach(btn => btn.addEventListener("click", () => {
    const current = steps[currentStep];
    const required = current.querySelectorAll("[required]");
    let valid = true;
    required.forEach(el => { if (!el.value.trim()) { valid = false; el.focus(); } });
    if (!valid) {
      alert(currentLang === 'fr' ? "Veuillez remplir tous les champs obligatoires." : "Please fill all required fields.");
      return;
    }
    steps[currentStep].classList.remove("active");
    currentStep++;
    steps[currentStep].classList.add("active");
    updateProgress();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }));

  document.querySelectorAll(".prev").forEach(btn => btn.addEventListener("click", () => {
    steps[currentStep].classList.remove("active");
    currentStep--;
    steps[currentStep].classList.add("active");
    updateProgress();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }));

  // Submit
  document.getElementById("multiStepForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    const data = {};
    for (let [key, value] of formData.entries()) {
      data[key] = data[key] ? (Array.isArray(data[key]) ? [...data[key], value] : [data[key], value]) : value;
    }

    try {
      await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
        to_email: YOUR_EMAIL,
        nom_complet: data.nom_complet || '-',
        email_client: data.email_client || '-',
        telephone: data.telephone || '-',
        entreprise: data.entreprise || '-',
        description: data.description || '-',
        objectif_principal: data.objectif_principal || '-',
        actions: Array.isArray(data.actions) ? data.actions.join(' • ') : (data.actions || '-'),
        logo: data.logo || '-',
        style_visuel: data.style_visuel || '-',
        fonctionnalites: Array.isArray(data.fonctionnalites) ? data.fonctionnalites.join(' • ') : (data.fonctionnalites || '-'),
        importance_seo: data.importance_seo || '-',
        date_lancement: data.date_lancement || '-',
        notes: data.notes || '-'
      });

      // Affichage du message de remerciement
      document.getElementById('mainContent').style.display = 'none';
      const ty = document.getElementById('thankYou');
      ty.style.display = 'block';
      document.getElementById('thankTitle').innerText = currentLang === 'fr' ? 'Merci !' : 'Thank you!';
      document.getElementById('thankText').innerHTML = currentLang === 'fr' 
        ? 'Votre questionnaire a bien été envoyé.<br>Je vous recontacte sous peu.' 
        : 'Your questionnaire has been sent successfully.<br>I will contact you shortly.';

    } catch (err) {
      console.error(err);
      alert(currentLang === 'fr' ? "❌ Erreur lors de l’envoi. Vérifie tes clés EmailJS." : "❌ Sending error. Check your EmailJS keys.");
    }
  });

  updateProgress();
});
</script>
</body>
</html>
